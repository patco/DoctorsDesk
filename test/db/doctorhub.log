/*C3*/SET SCHEMA PUBLIC
alter table Activity drop constraint FK_jw197u7qyjfg9vc0f5qkjn7f6
alter table Activity drop constraint FK_dd7ivfd2jnf7ak7yqu419e4y9
alter table Activity drop constraint FK_sritom966oex3twqelcdqlbul
alter table Address drop constraint FK_lfc3xpnqab4aas28rijp1xgxu
alter table Contactinfo drop constraint FK_fyrdy5f5chhfi2b7kqa6f68ji
alter table Discount drop constraint FK_331orimwdks63d1o9xig36wky
alter table Medicalhistory drop constraint FK_4tdjyydr7xyynaat91pcro433
alter table Medicalhistoryentry drop constraint FK_2e86sulon6cjxlnvhxnr89ro1
alter table Patient drop constraint FK_pec6xyaav936469iu6mwx9glf
alter table UserPreferences drop constraint FK_gugb24f09a1ewmyo8pc7u8flt
alter table Visit drop constraint FK_2aym2k5rm6x04ildckdue4bwn
alter table patienthistory drop constraint FK_21o1fsph4hh7xq7393v8bj0o6
alter table prescriptionentries drop constraint FK_mdif1v0bmnt5vaov6ec494b16
alter table prescriptionentries drop constraint FK_lmw2sgr0h7i9e48a7bslr8uh1
alter table prescriptions drop constraint FK_n56ykn2rl0a2v7uqla6w17ywn
alter table prescriptions drop constraint FK_gi5h78yxlgh5rmkuw72cxoql9
alter table pricelist drop constraint FK_5h6i5ywgxx2xbhcg4nqgsdp6x
drop table Activity if exists
drop table Address if exists
drop table Contactinfo if exists
drop table Discount if exists
drop table Medicalhistory if exists
drop table Medicalhistoryentry if exists
drop table Patient if exists
drop table UserPreferences if exists
drop table Visit if exists
drop table doctor if exists
drop table medicine if exists
drop table patienthistory if exists
drop table prescriptionentries if exists
drop table prescriptions if exists
drop table pricelist if exists
create table Activity (id integer generated by default as identity (start with 1), description varchar(255) not null, enddate timestamp, isopen boolean not null, price numeric(131089,0), startdate timestamp not null, discount integer not null, patienthistid integer not null, priceable integer not null, primary key (id))
create table Address (adrstype integer not null, id integer not null, city varchar(255), country varchar(255), number integer, postalcode varchar(255), street varchar(255), primary key (adrstype, id))
create table Contactinfo (id integer not null, infotype integer not null, info varchar(255), primary key (id, infotype))
create table Discount (id integer generated by default as identity (start with 1), description varchar(256), discount numeric(131089,0) not null, title varchar(80) not null, doctorid integer not null, primary key (id))
create table Medicalhistory (comments varchar(1024), id integer not null, primary key (id))
create table Medicalhistoryentry (added timestamp not null, id integer not null, alert integer, comments varchar(255), primary key (added, id))
create table Patient (id integer generated by default as identity (start with 1), comments varchar(255), created timestamp not null, name varchar(255) not null, surname varchar(255) not null, doctorid integer not null, primary key (id))
create table UserPreferences (dailyreports boolean not null, emailcontent varchar(255), emailnotification boolean not null, eventtitleformat integer not null, prescriptionheader varchar(255), reportemail varchar(255), scheduler_maxhr integer not null, scheduler_minhr integer not null, scheduler_slotmins integer not null, scheduler_starthr integer not null, theme varchar(255), userid integer not null, primary key (userid))
create table Visit (id integer generated by default as identity (start with 1), color integer not null, comments varchar(255) not null, deposit numeric(19,2) not null, enddate timestamp, title varchar(255) not null, visitdate timestamp not null, activityid integer, primary key (id))
create table doctor (id integer generated by default as identity (start with 1), name varchar(80) not null, password varchar(16) not null, surname varchar(80) not null, username varchar(16) not null, primary key (id))
create table medicine (id integer generated by default as identity (start with 1), activeingredient varchar(255), name varchar(255), primary key (id))
create table patienthistory (comments varchar(255), enddate timestamp, startdate timestamp, patientid integer not null, primary key (patientid))
create table prescriptionentries (id integer generated by default as identity (start with 1), duration integer, durunit integer, frequency integer, frequnit integer, route integer, medicine integer, prescriptionid integer, primary key (id))
create table prescriptions (id integer generated by default as identity (start with 1), created timestamp, doctorid integer, patienthistid integer, primary key (id))
create table pricelist (id integer generated by default as identity (start with 1), description varchar(256), price numeric(131089,0) not null, title varchar(80) not null, doctorid integer not null, primary key (id))
alter table doctor add constraint UK_ctspax8ladjoxfko6qkhxwmpb  unique (username)
alter table Activity add constraint FK_jw197u7qyjfg9vc0f5qkjn7f6 foreign key (discount) references Discount
alter table Activity add constraint FK_dd7ivfd2jnf7ak7yqu419e4y9 foreign key (patienthistid) references patienthistory
alter table Activity add constraint FK_sritom966oex3twqelcdqlbul foreign key (priceable) references pricelist
alter table Address add constraint FK_lfc3xpnqab4aas28rijp1xgxu foreign key (id) references Patient
alter table Contactinfo add constraint FK_fyrdy5f5chhfi2b7kqa6f68ji foreign key (id) references Patient
alter table Discount add constraint FK_331orimwdks63d1o9xig36wky foreign key (doctorid) references doctor
alter table Medicalhistory add constraint FK_4tdjyydr7xyynaat91pcro433 foreign key (id) references Patient
alter table Medicalhistoryentry add constraint FK_2e86sulon6cjxlnvhxnr89ro1 foreign key (id) references Medicalhistory
alter table Patient add constraint FK_pec6xyaav936469iu6mwx9glf foreign key (doctorid) references doctor
alter table UserPreferences add constraint FK_gugb24f09a1ewmyo8pc7u8flt foreign key (userid) references doctor
alter table Visit add constraint FK_2aym2k5rm6x04ildckdue4bwn foreign key (activityid) references Activity
alter table patienthistory add constraint FK_21o1fsph4hh7xq7393v8bj0o6 foreign key (patientid) references Patient
alter table prescriptionentries add constraint FK_mdif1v0bmnt5vaov6ec494b16 foreign key (medicine) references medicine
alter table prescriptionentries add constraint FK_lmw2sgr0h7i9e48a7bslr8uh1 foreign key (prescriptionid) references prescriptions
alter table prescriptions add constraint FK_n56ykn2rl0a2v7uqla6w17ywn foreign key (doctorid) references doctor
alter table prescriptions add constraint FK_gi5h78yxlgh5rmkuw72cxoql9 foreign key (patienthistid) references patienthistory
alter table pricelist add constraint FK_5h6i5ywgxx2xbhcg4nqgsdp6x foreign key (doctorid) references doctor
